<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Romi Robot: ME 405 Term Project – Romi Line-Following Robot</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 405 Romi Robot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md_docs_2_main_page.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ME 405 Term Project – Romi Line-Following Robot </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md17"></a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
Project Overview</h1>
<p>This project was completed as part of <b>ME 405: Mechatronics</b> at Cal Poly San Luis Obispo. <br  />
 The objective was to design and implement a fully autonomous Romi robot capable of reliably completing a printed line-following time-trial course using onboard sensing, real-time control, and a task-based software architecture.</p>
<p>The final system integrates custom motor control, encoder-based feedback, reflectance sensor processing, and cooperative multitasking to achieve repeatable and robust performance. Emphasis was placed on reliability, modularity, and clear separation between sensing, control, and actuation rather than purely maximizing speed.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md19"></a>
System Architecture</h1>
<p>The software is organized using a <b>cooperative multitasking framework</b> implemented in MicroPython. Independent tasks are responsible for sensing, control, motor actuation, and data streaming, and they communicate using thread-safe shared variables and queues.</p>
<p>This structure allows time-critical operations (such as motor updates and sensor sampling) to run deterministically while higher-level logic executes concurrently without blocking. The modular task design simplified debugging and enabled incremental development throughout the quarter.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md20"></a>
Hardware &amp; Electrical Design</h1>
<p>The robot is built on a Pololu Romi chassis with two DC motors driven by onboard motor drivers and instrumented with quadrature encoders for wheel position and velocity feedback. Line detection is performed using a reflectance sensor array mounted at the front of the chassis and positioned to maximize contrast and minimize sensitivity to lighting variation.</p>
<p>Power is supplied by <b>six AA batteries</b>, and care was taken to ensure predictable startup behavior. Electrical design decisions included modifying default pull-up configurations and selecting motor control pins to prevent unintended motion on power-up. Encoder wiring, sensor placement, and cable management were refined to improve repeatability and robustness during operation.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md21"></a>
Software &amp; Control Design</h1>
<p>Motor actuation is abstracted through a dedicated motor driver interface that enforces safe enable/disable behavior and bounded effort commands. Wheel encoders provide continuous feedback, enabling closed-loop control based on measured motion rather than open-loop assumptions.</p>
<p>Line following is implemented using a layered control strategy. Low-level motor effort commands are combined with higher-level logic that interprets reflectance sensor data to generate corrective steering behavior. The control scheme prioritizes stability and consistency, allowing the robot to recover gracefully from disturbances such as sharp curvature or brief sensor dropout.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md22"></a>
Results &amp; Demonstration</h1>
<p>The completed robot successfully performed multiple time-trial runs on the printed course with consistent behavior and reliable line tracking. The system demonstrated stable control, predictable startup behavior, and repeatable performance across runs.</p>
<p>A video demonstration of the robot completing the course is included below to illustrate real-time operation and control behavior.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md23"></a>
Challenges &amp; Lessons Learned</h1>
<p>One of the primary challenges of the project was achieving reliable sensor interpretation under varying conditions while maintaining responsive control. Additional challenges included managing task timing, preventing unintended motor behavior at startup, and balancing responsiveness with stability in the control loop.</p>
<p>These challenges highlighted the importance of modular design, incremental testing, and clear separation between hardware interfaces and control logic. In hindsight, additional time spent early on system architecture would have further streamlined later integration and tuning.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md24"></a>
Repository</h1>
<p>All source code, documentation, and design files for this project are available in the associated GitHub repository. The repository is organized to allow the project to be reproduced or extended by future students. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
