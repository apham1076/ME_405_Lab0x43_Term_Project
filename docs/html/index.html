<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Term Project: Romi Line-Following Robot</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 405 Term Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('index.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Romi Line-Following Robot </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2 class="doxsection"><a class="anchor" id="autotoc_md41"></a>
Project Overview</h2>
<p>This project was completed as part of <b>ME 405: Mechatronics</b> at Cal Poly San Luis Obispo. The objective was to design and implement a fully autonomous Romi robot capable of reliably completing a printed line-following time-trial course using onboard sensing, real-time control, and a cooperative multitasking software architecture.</p>
<p>The final system integrates closed-loop motor control, encoder-based feedback, reflectance sensor processing, and task-level coordination to achieve repeatable and robust performance. Design decisions prioritized reliability, modularity, and predictable behavior over purely maximizing speed.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md43"></a>
Line-Following Course</h2>
<p>The robot was evaluated on a printed line-following course used for time trials and final demonstrations.</p>
<div class="image">
<object type="image/svg+xml" data="images/Game_Track.svg" width="80%" style="pointer-events: none;"></object>
<div class="caption">
Printed line-following course used for time trials and final demonstration.</div></div>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md45"></a>
Hardware &amp; Electrical Design</h2>
<p>The robot is built on a Pololu Romi chassis with two DC motors driven by onboard motor drivers and instrumented with quadrature encoders for wheel position and velocity feedback. Line detection is performed using a reflectance sensor array mounted at the front of the chassis and positioned to provide consistent contrast while minimizing sensitivity to ambient lighting.</p>
<p>Power is supplied by <b>six AA batteries</b>. Several electrical design decisions were made to ensure predictable startup behavior, including modifying default pull-up configurations and selecting motor control pins to prevent unintended motion on power-up. Encoder wiring, sensor placement, and cable management were refined to improve repeatability and robustness during operation.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md47"></a>
Software Architecture</h2>
<p>The firmware is organized using a <b>cooperative multitasking framework</b> implemented in MicroPython. Independent tasks handle sensing, control, actuation, and communication, and they exchange information using thread-safe shared variables and queues.</p>
<p>This structure allows time-critical operations, such as motor updates and sensor sampling, to execute deterministically while higher-level logic runs concurrently without blocking. The modular task design simplified debugging and enabled incremental development throughout the quarter.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md49"></a>
Closed-Loop Motor Control</h2>
<p>Wheel encoders provide continuous feedback for closed-loop motor control. A proportional–integral controller regulates wheel velocity, allowing the robot to track commanded setpoints consistently across operating conditions.</p>
<div class="image">
<img src="images/run3_V_sp15.0_Kp5.00_Ki0.05_left_vel.png" alt=""/>
<div class="caption">
\</div></div>
<p> "Representative closed-loop velocity response for the left motor. The controller tracks a commanded velocity setpoint using tuned proportional–integral gains, demonstrating stable and repeatable behavior." width=80%</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md51"></a>
Final Demonstration</h2>
<p>The video below shows the robot navigating the printed course during a final demonstration run and successfully reaching the designated checkpoint.</p>
<p>@video html images/Romi_Demo.mp4 width=80%</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md53"></a>
Repository</h2>
<p>All source code, documentation, and design files for this project are available in the associated GitHub repository. The repository is organized to allow the system to be reproduced or extended in future work. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
