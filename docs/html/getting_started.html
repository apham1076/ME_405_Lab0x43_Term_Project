<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Term Project: Getting Started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 405 Term Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('getting_started.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Getting Started </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This section describes how the Romi line-following project is organized and how the firmware is intended to be run. The codebase reflects the cumulative work from Labs 0x01 through 0x05 and is structured around a cooperative multitasking architecture.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md32"></a>
Repository Layout</h2>
<p>The repository is organized to separate low-level hardware interfaces, control logic, and supporting infrastructure.</p>
<ul>
<li><span class="tt">src/</span> <br  />
 Contains the MicroPython source files that execute on the Romi microcontroller. This directory includes motor drivers, encoder interfaces, sensor drivers, control logic, task definitions, and the main scheduler.</li>
<li><span class="tt">utilities/</span> <br  />
 Shared infrastructure used across multiple tasks, including queues, shared variables, and task utilities.</li>
<li><span class="tt">docs/</span> <br  />
 Project documentation generated using Doxygen.</li>
<li><span class="tt">inactive tasks/</span> <br  />
 Tasks and experimental features developed during the quarter that are not enabled in the final configuration. These files are retained for reference.</li>
</ul>
<p>The final system prioritizes modularity and clarity over minimizing file count. Tasks are kept logically independent and communicate through shared data structures rather than direct coupling.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md34"></a>
Hardware Configuration</h2>
<p>The firmware targets a Pololu Romi chassis with two DC motors and quadrature encoders for wheel position and velocity feedback. Line sensing is performed using a reflectance sensor array mounted near the front of the robot. An IMU is available and supported in the codebase.</p>
<p>Power is supplied by <b>six AA batteries</b>. Startup behavior was treated as a design constraint rather than an afterthought; motor enable logic, pin assignments, and pull-down configurations were chosen to prevent unintended motion when the system is powered on.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md36"></a>
Software Architecture</h2>
<p>The system is built around a <b>cooperative task scheduler</b>, following the structure introduced in ME 405. Each major subsystem is implemented as an independent task, including:</p>
<ul>
<li>motor actuation</li>
<li>encoder measurement</li>
<li>line sensing</li>
<li>steering and control logic</li>
<li>user interface and mode selection</li>
<li>data streaming</li>
<li>optional state estimation and path planning</li>
</ul>
<p>Tasks communicate using shared variables and queues, which allows time-critical operations to execute deterministically while higher-level logic runs concurrently without blocking. This structure made it possible to debug and validate individual subsystems before integrating them into the full system.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md38"></a>
Control Structure</h2>
<p>Motor actuation is handled through a dedicated motor interface that enforces bounded effort commands and explicit enable/disable behavior. Encoder feedback is used to support closed-loop control rather than relying on open-loop assumptions.</p>
<p>Line following is implemented using a layered approach. Low-level motor commands are combined with steering logic that interprets reflectance sensor data to generate corrective behavior. The control strategy emphasizes stability and repeatability, allowing the robot to recover from disturbances such as sharp curvature or brief sensor dropout.</p>
<p>Battery voltage droop is explicitly accounted for in the control pipeline to maintain consistent behavior over the duration of a run.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md40"></a>
Data Streaming and PC Interface</h2>
<p>In the final configuration, data is streamed from the Romi to a PC in real time. Rather than collecting large datasets in onboard queues and transferring them after a run, tasks publish values continuously during operation.</p>
<p>Streaming is <b>enabled by default</b> on startup and can be toggled through the PC-side interface. This approach reduced memory usage on the microcontroller and provided immediate visibility into system behavior during testing and tuning.</p>
<p>The PC-side script (<span class="tt"><a class="el" href="test_8py.html">test.py</a></span>) serves as both a diagnostic interface and a lightweight command channel, allowing parameters and modes to be adjusted without reflashing firmware.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md42"></a>
Running the Firmware</h2>
<p>To run the project on a Romi robot:</p>
<ol type="1">
<li>Flash a compatible version of MicroPython onto the microcontroller.</li>
<li>Copy the contents of the <span class="tt">src/</span> directory onto the board.</li>
<li>Verify that motors, encoders, and sensors are connected correctly.</li>
<li>Execute <span class="tt"><a class="el" href="main_8py.html">main.py</a></span> to initialize the system and start the scheduler.</li>
</ol>
<p>On startup, the system initializes all enabled tasks and begins executing the cooperative schedule. Diagnostic output and streamed data can be observed on the connected PC.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md44"></a>
Notes on Extension</h2>
<p>The repository reflects a stable configuration used for final time-trial demonstrations. Additional capabilities, such as alternative control strategies, state estimation, and path planning, were explored during development and are partially implemented in the codebase.</p>
<p>Because functionality is organized around independent tasks with well-defined interfaces, new features can be added or existing behavior modified without restructuring the entire system. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
